<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta name="description" content="个人技术博客">
<meta property="og:type" content="website">
<meta property="og:title" content="CHEN.星~博客">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="CHEN.星~博客">
<meta property="og:description" content="个人技术博客">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="CHEN.星~博客">
<meta name="twitter:description" content="个人技术博客">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>CHEN.星~博客</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">CHEN.星~博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">生命在于折腾</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Startseite
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archiv
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/04/base64字符数据图片转Blob/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="CHEN.星">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CHEN.星~博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/05/04/base64字符数据图片转Blob/" itemprop="url">base64字符数据图片转Blob以及上传遇到问题</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-05-04T20:19:07+08:00">
                2017-05-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li>项目存在一个图片过大做压缩的功能，而遇到blob字符转换遇到的一些问题记录，以及上传出现的问题。</li>
</ul>
<hr>
<h3 id="base64转换blob"><a href="#base64转换blob" class="headerlink" title="base64转换blob"></a>base64转换blob</h3><pre><code>/**
 * 将以base64的图片url数据转换为Blob
 * @param urlData
 *  用url方式表示的base64图片数据
 */
function convertBase64UrlToBlob(urlData){
        var bytes=window.atob(urlData.split(&apos;,&apos;)[1]);        //去掉url的头，并转换为byte
        //处理异常,将ascii码小于0的转换为大于0
        var arr = urlData.split(&apos;,&apos;);
        var mime = arr[0].match(/:(.*?);/)[1];//获取到图片类型
        console.log(mime);
        var ab = new ArrayBuffer(bytes.length);
        var ia = new Uint8Array(ab);
        for (var i = 0; i &lt; bytes.length; i++) {
            ia[i] = bytes.charCodeAt(i);
        }
        return new Blob( [ab] , {type : mime});}
</code></pre><hr>
<h3 id="压缩图片JS"><a href="#压缩图片JS" class="headerlink" title="压缩图片JS"></a>压缩图片JS</h3><pre><code>  * 这是基于html5的前端图片工具，压缩工具。

 function ImageResizer(opts,returnObject){  
 var settings={
    resizeMode:&quot;auto&quot;//压缩模式，总共有三种  auto,width,height auto表示自动根据最大的宽度及高度等比压缩，width表示只根据宽度来判断是否需要等比例压缩，height类似。
    ,dataSource:&quot;&quot; //数据源。数据源是指需要压缩的数据源，有三种类型，image图片元素，base64字符串，canvas对象，还有选择文件时候的file对象。。。
    ,dataSourceType:&quot;image&quot; //image  base64 canvas
    //,maxWidth:150 //允许的最大宽度
    //,maxHeight:200 //允许的最大高度。
    ,onTmpImgGenerate:function(img){} //当中间图片生成时候的执行方法。。这个时候请不要乱修改这图片，否则会打乱压缩后的结果。
    ,success:function(resizeImgBase64,canvas){

    }//压缩成功后图片的base64字符串数据。
    ,debug:false //是否开启调试模式。
};
var appData={};
$.extend(settings,opts);

var _debug=function(str,styles){
    if(settings.debug==true){
        if(styles){
            console.log(str,styles);
        }
        else{
            console.log(str);
        }
    }
};
var innerTools={
    getBase4FromImgFile:function(file,callBack){

        var reader = new FileReader();
        reader.onload = function(e) {
            var base64Img= e.target.result;
            //var $img = $(&apos;&lt;img&gt;&apos;).attr(&quot;src&quot;, e.target.result)
            //$(&apos;#preview&apos;).empty().append($img)
            if(callBack){
                callBack(base64Img);
            }
        };
        reader.readAsDataURL(file);
    }

    //--处理数据源。。。。将所有数据源都处理成为图片图片对象，方便处理。
    ,getImgFromDataSource:function(datasource,dataSourceType,callback){
        var _me=this;
        var img1=new Image();
        if(dataSourceType==&quot;img&quot;||dataSourceType==&quot;image&quot;){
            img1.src=$(datasource).attr(&quot;src&quot;);
            if(callback){
                callback(img1);
            }
        }
        else if(dataSourceType==&quot;base64&quot;){
            img1.src=datasource;
            if(callback){
                callback(img1);
            }            }
        else if(dataSourceType==&quot;canvas&quot;){
            img1.src = datasource.toDataURL(&quot;image/jpeg&quot;);
            if(callback){
                callback(img1);
            }
        }
        else if(dataSourceType==&quot;file&quot;){
            _me.getBase4FromImgFile(function(base64str){
                img1.src=base64str;
                if(callback){
                    callback(img1);
                }
            });
        }

    }
    //计算图片的需要压缩的尺寸。当然，压缩模式，压缩限制直接从setting里面取出来。
    ,getResizeSizeFromImg:function(img){
        var _img_info={
            w:$(img)[0].naturalWidth,
            h:$(img)[0].naturalHeight
        };
        console.log(&quot;真实尺寸：&quot;);
        console.log(_img_info);
        var _resize_info={
            w:0
            ,h:0
        };
        if(_img_info.w&lt;=settings.maxWidth&amp;&amp;_img_info.h&lt;=settings.maxHeight){
            return _img_info;
        }
        if(settings.resizeMode==&quot;auto&quot;){
            var _percent_scale=parseFloat(_img_info.w/_img_info.h);
            var _size1={
                w:0
                ,h:0
            };
            var _size_by_mw={
                w:settings.maxWidth
                ,h:parseInt(settings.maxWidth/_percent_scale)
            };
            var _size_by_mh={
                w:parseInt(settings.maxHeight*_percent_scale)
                ,h:settings.maxHeight
            };
            if(_size_by_mw.h&lt;=settings.maxHeight){
                return _size_by_mw;
            }
            if(_size_by_mh.w&lt;=settings.maxWidth){
                return _size_by_mh;
            }

            return {
                w:settings.maxWidth
                ,h:settings.maxHeight
            };

        }
        if(settings.resizeMode==&quot;width&quot;){
            if(_img_info.w&lt;=settings.maxWidth){
                return _img_info;
            }
            var _size_by_mw={
                w:settings.maxWidth
                ,h:parseInt(settings.maxWidth/_percent_scale)
            };
            return _size_by_mw;
        }

        if(settings.resizeMode==&quot;height&quot;){
            if(_img_info.h&lt;=settings.maxHeight){
                return _img_info;
            }
            var _size_by_mh={
                w:parseInt(settings.maxHeight*_percent_scale)
                ,h:settings.maxHeight
            };
            return _size_by_mh;
        }

    }
    //--将相关图片对象画到canvas里面去。
    ,drawToCanvas:function(img,theW,theH,realW,realH,callback){

        var canvas = document.createElement(&quot;canvas&quot;);
        canvas.width=theW;
        canvas.height=theH;
        var ctx = canvas.getContext(&apos;2d&apos;);
        ctx.drawImage(img,
            0,//sourceX,
            0,//sourceY,
            realW,//sourceWidth,
            realH,//sourceHeight,
            0,//destX,
            0,//destY,
            theW,//destWidth,
            theH//destHeight
        );

        //--获取base64字符串及canvas对象传给success函数。
        var base64str=canvas.toDataURL(&quot;image/png&quot;);
        if(callback){
            callback(base64str,canvas);
        }
    }
};

//--开始处理。
(function(){
    innerTools.getImgFromDataSource(settings.dataSource,settings.dataSourceType,function(_tmp_img){
        var __tmpImg=_tmp_img;
        settings.onTmpImgGenerate(_tmp_img);
        //--计算尺寸。
        var _limitSizeInfo=innerTools.getResizeSizeFromImg(__tmpImg);
        console.log(_limitSizeInfo);
        var _img_info={
            w:$(__tmpImg)[0].naturalWidth,
            h:$(__tmpImg)[0].naturalHeight
        };
        innerTools.drawToCanvas(__tmpImg,_limitSizeInfo.w,_limitSizeInfo.h,_img_info.w,_img_info.h,function(base64str,canvas){
            settings.success(base64str,canvas);
        });

    });
})();

returnObject({
    a:1
});

//return returnObject;
</code></pre><p>};</p>
<h3 id="blob上传遇到的问题"><a href="#blob上传遇到的问题" class="headerlink" title="blob上传遇到的问题"></a>blob上传遇到的问题</h3><pre><code>    /**
    *File对象为base
    /
  var img = new FormData();
img.append(&quot;files&quot;, eachFile,eachFile.name);
</code></pre><ul>
<li>项目后台代码反正我不清楚，平时上传的图片是存在图片名字的，base64在转为Blob后上传，获取不到文件名字，就需要eachFile.name作为参数一起append到文件流里面。</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/10/JqueryFileUpload遇到angulrjs/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="CHEN.星">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CHEN.星~博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/04/10/JqueryFileUpload遇到angulrjs/" itemprop="url">JqueryFileUpload遇到angulrjs</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-04-10T20:11:00+08:00">
                2017-04-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li>input上传单个文件的时候，点击多次替换文件，文件会缓存起来，clone,replaceWith这个input会解决此问题，但是angularjs替换input元素后不会认识这个dom元素，事件不会执行，需要用到$compile指令来封装一次元素。</li>
</ul>
<hr>
<pre><code>var input=$(&quot;#imgFile&quot;);
 var template = angular.element(input.clone());//复制一个input
 var content = $compile(template)(scope);用angularjs 封装好
 input.replaceWith(content); 替换
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/03/15/angulrjs项目拦截器/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="CHEN.星">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CHEN.星~博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/03/15/angulrjs项目拦截器/" itemprop="url">angulrjs项目拦截器</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-03-15T10:59:24+08:00">
                2017-03-15
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="项目中拦截器"><a href="#项目中拦截器" class="headerlink" title="项目中拦截器"></a>项目中拦截器</h3><pre><code>(function(angular){
&apos;use strict&apos;;
angular.module(&quot;platform.main.interceptor&quot;,[])
    /**
     * 服务端消息状态码处理   
     */
    .factory(&apos;messageHttpInterceptor&apos;,[&apos;$q&apos;,function($q){
        return {
            &apos;response&apos;: function(response) {
                var result = response.data;
                if(result.text &amp;&amp; result.text!=&quot;&quot;){
                    if(result.code&gt;=0){
                        toastr.success(result.text);
                    }else{
                        if(result.code==14013){
                            window.location.href =&quot;index.html&quot;;
                        }else {
                            toastr.error(result.text);
                        }

                    }
                }
                return response;
            }
        }
    }])
    .config([&apos;$httpProvider&apos;,function($httpProvider){
        $httpProvider.interceptors.push(&apos;messageHttpInterceptor&apos;);
    }])
})(angular);
——————————

(function(angular){
&apos;use strict&apos;;
angular.module(&quot;platform.main.interceptor&quot;,[])
    /**
     * 服务端消息状态码处理
     */
    .factory(&apos;messageHttpInterceptor&apos;,[&apos;$q&apos;,function($q){
        return {
             request:function(config){
                  config.headers[&quot;TOKEN&quot;] = $rootScope.user.token;
                  return config;

                },
            &apos;response&apos;: function(response) {
                var result = response.data;
                if(result.text &amp;&amp; result.text!=&quot;&quot;){
                    if(result.code&gt;=0){
                        toastr.success(result.text);
                    }else{
                        if(result.code==14013){
                            window.location.href =&quot;index.html&quot;;
                        }else {
                            toastr.error(result.text);
                        }

                    }
                }
                return response;
            }，
             responseError: function (response) {
                  var data = response.data;
                  // 判断错误码，如果是未登录
                  if(data[&quot;errorCode&quot;] == &quot;500999&quot;){
                    // 清空用户本地token存储的信息，如果
                    $rootScope.user = {token:&quot;&quot;};
                    // 全局事件，方便其他view获取该事件，并给以相应的提示或处理
                    $rootScope.$emit(&quot;userIntercepted&quot;,&quot;notLogin&quot;,response);
                  }
                  // 如果是登录超时
                  if(data[&quot;errorCode&quot;] == &quot;500998&quot;){
                    $rootScope.$emit(&quot;userIntercepted&quot;,&quot;sessionOut&quot;,response);
                  }
                  return $q.reject(response);
                }
        }
    }])
    .config([&apos;$httpProvider&apos;,function($httpProvider){
        $httpProvider.interceptors.push(&apos;messageHttpInterceptor&apos;);
    }])
})(angular);
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/02/15/angulrjs中run的运用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="CHEN.星">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CHEN.星~博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/02/15/angulrjs中run的运用/" itemprop="url">angulrjs中run的运用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-02-15T19:59:35+08:00">
                2017-02-15
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="run方法用于初始化全局的数据，仅对全局作用域起作用。"><a href="#run方法用于初始化全局的数据，仅对全局作用域起作用。" class="headerlink" title="run方法用于初始化全局的数据，仅对全局作用域起作用。"></a>run方法用于初始化全局的数据，仅对全局作用域起作用。</h1><h3 id="浏览器判断"><a href="#浏览器判断" class="headerlink" title="浏览器判断"></a>浏览器判断</h3><pre><code>.run([&apos;$rootScope&apos;, &apos;$route&apos;, &apos;$window&apos;, &apos;$location&apos;, &apos;Position&apos;, &apos;$cookies&apos;, &apos;Request&apos;, &apos;$cookieStore&apos;,
  function($rootScope, $route, $window, $location, position, $cookies, request, $cookieStore) {
   //非微信的登陆
   $rootScope.isWeiXinLogin = function() {
//判断是否微信登陆
var ua = window.navigator.userAgent.toLowerCase();
//console.log(ua); //mozilla/5.0 (iphone; cpu iphone os 9_1 like mac os x) applewebkit/601.1.46 (khtml, like gecko) version/9.0 mobile/13b143 safari/601.1
if (ua.match(/MicroMessenger/i) == &apos;micromessenger&apos;) {
 console.log(&quot; 是来自微信内置浏览器&quot;);
 return true;
} else {
 console.log(&quot;不是来自微信内置浏览器&quot;);
 return false;
}
   };
]);
--------------
控制层处理
angular.module(&apos;autumnswind&apos;).controller(&apos;OrderCtrl&apos;, [&apos;$rootScope&apos;, &apos;$scope&apos;, &apos;Request&apos;, &apos;$cookies&apos;, &apos;$window&apos;, &apos;$routeParams&apos;, &apos;$location&apos;, &apos;Tool&apos;,
 function($rootScope, $scope, request, $cookies, $window, $routeParams, $location, tool) { 
if ($rootScope.isWeiXinLogin()) {
     ...
    }
   }
]);
</code></pre><h3 id="登陆判断"><a href="#登陆判断" class="headerlink" title="登陆判断"></a>登陆判断</h3><h4 id="项目中run-http和ajax请求头全局"><a href="#项目中run-http和ajax请求头全局" class="headerlink" title="项目中run$http和ajax请求头全局"></a>项目中run$http和ajax请求头全局</h4><pre><code>.run([&apos;$http&apos;, &apos;$cookies&apos;,&apos;$rootScope&apos;,&apos;$location&apos;, function($http, $cookies,$rootScope,$location) {
        $http.defaults.headers.common[&apos;X-Requested-With&apos;] = &apos;XMLHttpRequest&apos;;
        $http.defaults.headers.common[&apos;X-Auth-Token&apos;] = $cookies.get(&apos;X-Auth-Token&apos;);
        $.ajaxSetup({
            headers: {
                &apos;X-Auth-Token&apos;: $cookies.get(&apos;X-Auth-Token&apos;)
            }
        });

    }]);
    //x-requested-with XMLHttpRequest是Ajax 异步请求方式
    //直接用于全局环境每次$http头信息
</code></pre><h3 id="什么是-XMLHttpRequest-对象？"><a href="#什么是-XMLHttpRequest-对象？" class="headerlink" title="什么是 XMLHttpRequest 对象？"></a>什么是 XMLHttpRequest 对象？</h3><ul>
<li>XMLHttpRequest 对象用于在后台与服务器交换数据。</li>
<li>XMLHttpRequest 对象是开发者的梦想，因为您能够：</li>
<li>在不重新加载页面的情况下更新网页<br>在页面已加载后从服务器请求数据<br>在页面已加载后从服务器接收数据<br>在后台向服务器发送数据</li>
<li>所有现代的浏览……</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/01/10/webpack-dev-server/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="CHEN.星">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CHEN.星~博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/01/10/webpack-dev-server/" itemprop="url">webpack-dev-server</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-10T09:38:15+08:00">
                2017-01-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li><p>一直在angulrjs项目，查阅资料grunt配置环境里面，没有找到相关的热替换，然后找了一个简单的vue项目，做了一个热替换</p>
<h3 id="package-json文件"><a href="#package-json文件" class="headerlink" title="package.json文件"></a>package.json文件</h3><p>  {</p>
<pre><code>&quot;name&quot;: &quot;vue-project&quot;,
&quot;version&quot;: &quot;1.0.0&quot;,
&quot;description&quot;: &quot;chenxq&quot;,
&quot;main&quot;: &quot;index.js&quot;,
&quot;scripts&quot;: {
  &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;,
  &quot;dev&quot;: &quot;webpack-dev-server  --progress --inline&quot;
},
&quot;author&quot;: &quot;&quot;,
&quot;license&quot;: &quot;ISC&quot;,
&quot;devDependencies&quot;: {
  &quot;babel-core&quot;: &quot;^6.3.17&quot;,
  &quot;babel-loader&quot;: &quot;^6.2.0&quot;,
  &quot;babel-plugin-transform-runtime&quot;: &quot;^6.3.13&quot;,
  &quot;babel-preset-es2015&quot;: &quot;^6.3.13&quot;,
  &quot;babel-runtime&quot;: &quot;^5.8.34&quot;,
  &quot;css-loader&quot;: &quot;^0.23.0&quot;,
  &quot;file-loader&quot;: &quot;^0.10.1&quot;,
  &quot;html-webpack-plugin&quot;: &quot;^2.30.1&quot;,
  &quot;jquery&quot;: &quot;^3.2.1&quot;,
  &quot;style-loader&quot;: &quot;^0.15.0&quot;,
  &quot;url-loader&quot;: &quot;^0.5.8&quot;,
  &quot;vue&quot;: &quot;^2.2.5&quot;,
  &quot;vue-cli&quot;: &quot;^2.8.1&quot;,
  &quot;vue-hot-reload-api&quot;: &quot;^1.2.2&quot;,
  &quot;vue-html-loader&quot;: &quot;^1.0.0&quot;,
  &quot;vue-loader&quot;: &quot;^7.2.0&quot;,
  &quot;vue-resource&quot;: &quot;^1.2.1&quot;,
  &quot;vue-router&quot;: &quot;^2.3.0&quot;,
  &quot;vue-style-loader&quot;: &quot;^1.0.0&quot;,
  &quot;webpack&quot;: &quot;^1.12.9&quot;,
  &quot;webpack-dev-server&quot;: &quot;^1.16.5&quot;
    },
&quot;dependencies&quot;: {
  &quot;vue&quot;: &quot;^2.2.5&quot;
}
</code></pre><p>  }</p>
<h3 id="webpack-config-js"><a href="#webpack-config-js" class="headerlink" title="webpack.config.js"></a>webpack.config.js</h3><pre><code>// nodejs 中的path模块
var path = require(&apos;path&apos;);
var webpack = require(&apos;webpack&apos;);
//var HtmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;);
var HtmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;);//生成新的html
module.exports = {
// 入口文件，path.resolve()方法，可以结合我们给定的两个参数最后生成绝对路径，最终指向的就是我们的index.js文件
entry: {
    index:&quot;./main.js&quot;},
//entry:[&apos;&quot;./main.js&quot;&apos;,&quot;./main.js&quot;]多文件打包入口，同样对象也可以多文件
output: {
    path: &apos;./dist/js/&apos;,  //路径
    publicPath: &apos;&apos;,  //网站运行时访问的路径
    filename: &apos;[name]-[hash].js&apos; // 生成文件名  name为entry下的属性名

},
devServer:{
    //contentBase: &apos;&apos;,
    historyApiFallback:true,
    //hot:true,//webpack2 不支持了
    inline:true
    //progress:true,
    //port:8080,//端口你可以自定义
    //quiet:true,//显示打包的hash值
    //stats: &quot;errors-only&quot;
},
module: {
    loaders: [
        // 使用vue-loader 加载 .vue 结尾的文件
        {
            test: /\.vue$/,
            loader: &apos;vue&apos;//装载机loader
        },
        {
            test: /\.js$/,
            loader: &apos;babel?presets=es2015&apos;,
            exclude: /node_modules///排除
        },
        {
            test: /\.(jpg|png|gif|jpeg)?$/,
            loader: &apos;url?limit=20480&amp;name=dist/images/[name].[hash:8].[ext]&apos;
        }
    ]
},
resolve: {//决定
    extensions: [&apos;&apos;, &apos;.js&apos;, &apos;.vue&apos;],//扩展
    alias: {//别名
        &apos;vue$&apos;: &apos;vue/dist/vue.common.js&apos;
    }
},
plugins:[//热响应插件
    new webpack.HotModuleReplacementPlugin(),
    new HtmlWebpackPlugin({
        title: &apos;My App&apos;,
        path:&quot;&quot;,
        template:&quot;./index.html&quot;,
        filename: &apos;./home.html&apos;
    })
]
};
</code></pre></li>
</ul>
<h3 id="流程"><a href="#流程" class="headerlink" title="流程"></a>流程</h3><pre><code>webpack.js output.path:指定输出文件的路径。
webpack输出真实的文件，而webpack-dev-server输出的文件只存在于内存中,不输出真实的文件！
output: {
    path: &apos;./dist/js/&apos;,  //路径
    publicPath: &apos;&apos;,  //网站运行时访问的路径
    filename: &apos;[name]-[hash].js&apos; // 生成文件名  name为entry下的属性名

},
webpack-dev-server生成的文件在内存中也是存在dist/js 这个文件内。

 &quot;scripts&quot;: {
    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;,
    &quot;dev&quot;: &quot;webpack-dev-server  --progress --inline&quot;
  },
### 启动 ###
npm run dev 
dev 手动配置的
启动后浏览器http://localhost:8080/home.html
</code></pre><h3 id="坑过重要的点"><a href="#坑过重要的点" class="headerlink" title="坑过重要的点"></a>坑过重要的点</h3><pre><code>webpack配置生成的合并js到dist/js 下面跟 热替换是没有关系的。    
webpack-dev-server生成的文件在内存中也是存在dist/js 这个文件内。
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/12/02/angularjs渲染ng-repeat后执行代码/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="CHEN.星">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CHEN.星~博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/12/02/angularjs渲染ng-repeat后执行代码/" itemprop="url">angularjs渲染ng-repeat后执行代码</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-02T17:33:22+08:00">
                2016-12-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li>AnguarJs提供了一些对于Html进行加强的语义标签(directive)，这些标签在浏览器加载完页面后被执行</li>
</ul>
<hr>
<pre><code>//定义一个指令
app.directive(&apos;onFinishRender&apos;, function ($timeout) {
return {
    restrict: &apos;A&apos;,
    link: function(scope, element, attr) {
        if (scope.$last === true) {
            $timeout(function() {
                scope.$emit(&apos;ngRepeatFinished&apos;);
            });
        }
    }
};
});
//HTML
&lt;tr ng-repeat=&quot;user in users&quot; on-finish-render=&quot;ngRepeatFinished&quot;&gt;
  &lt;td&gt;{{user.Id}}&lt;/td&gt;
  &lt;td&gt;{{user.Name}}&lt;/td&gt;
  &lt;td&gt;{{user.Salary}}&lt;/td&gt;
&lt;/tr&gt;
//控制层
$scope.$on(&apos;ngRepeatFinished&apos;, function () {
        //监听渲染完成后执行
          });
});
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/10/18/angulrjs基数偶数过滤/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="CHEN.星">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CHEN.星~博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/10/18/angulrjs基数偶数过滤/" itemprop="url">angulrjs基数偶数过滤</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-10-18T13:30:02+08:00">
                2016-10-18
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="js"><a href="#js" class="headerlink" title="js"></a>js</h3><pre><code>.filter(&apos;odditems&apos;,function(){//奇数
return function(inputArray){
    var array = [];
    if(inputArray){
        for(var i=0;i&lt;inputArray.length;i++){
            if(i%2!==0){
                array.push(inputArray[i]);
            }
        }
    }
    return array;
}})
-
.filter(&apos;evenitems&apos;,function(){//偶数
return function(inputArray){
    var array = [];
    if(inputArray){
        for(var i=0;i&lt;inputArray.length;i++){
            if(i%2==0){
                array.push(inputArray[i]);
            }
        }
    }
    return array;
}})
</code></pre><h3 id="html"><a href="#html" class="headerlink" title="html"></a>html</h3><pre><code>&lt;div ng-repeat=&quot;item in firstSlide |odditems&quot;&gt;
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/09/25/angularjs$directive$compile/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="CHEN.星">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CHEN.星~博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/09/25/angularjs$directive$compile/" itemprop="url">angularjs$directive$compile渲染html</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-09-25T17:30:21+08:00">
                2016-09-25
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="例子一"><a href="#例子一" class="headerlink" title="例子一"></a>例子一</h3><pre><code># HTML #

&lt;body ng-controller=&quot;MyController&quot;&gt;
    &lt;p compile&gt;&lt;/p&gt;
&lt;/body&gt;

# js #
  angular.module(&apos;myApp&apos;, [])
            .controller(&apos;MyController&apos;, function ($scope, $compile, $timeout) {
            })
            .directive(&apos;compile&apos;, function($compile) {
                return {
                    scope: {

                    },
                    link: function(scope, elem, attrs) {
                        scope.title = &apos;list&apos;;
                        scope.items = [&apos;list1&apos;, &apos;list2&apos;, &apos;list3&apos;];
                        var html = &apos;&lt;h1&gt;{{title}}&lt;/h1&gt;\
                        &lt;ul&gt;\
                            &lt;li ng-repeat=&quot;item in items&quot;&gt;{{item}}&lt;/li&gt;\
                        &lt;/ul&gt;&apos;;
                        elem.html($compile(html)(scope))
                    }
                }
            })
</code></pre><h3 id="例子二"><a href="#例子二" class="headerlink" title="例子二"></a>例子二</h3><pre><code>#HTML#

&lt;body ng-controller=&quot;MyController&quot;&gt;
&lt;p compile=&quot;html&quot;&gt;&lt;/p&gt;
&lt;/body&gt;

# JS #

   angular.module(&apos;myApp&apos;, [])
            .controller(&apos;MyController&apos;, function ($scope) {
                $scope.html = &apos;&lt;h1&gt;{{title}}&lt;/h1&gt;\
                        &lt;ul&gt;\
                            &lt;li ng-repeat=&quot;item in items&quot;&gt;{{item}}&lt;/li&gt;\
                        &lt;/ul&gt;&apos;

            })
            .directive(&apos;compile&apos;, function($compile) {
                return {
                    scope: {
                        compile: &apos;=&apos;
                    },
                    link: function(scope, elem, attrs) {
                        scope.title = &apos;list&apos;;
                        scope.items = [&apos;list1&apos;, &apos;list2&apos;, &apos;list3&apos;];
                        elem.html($compile(scope.compile)(scope))
                    }
                }
            })
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/08/26/AngularJS中的指令全面解析/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="CHEN.星">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CHEN.星~博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/08/26/AngularJS中的指令全面解析/" itemprop="url">AngularJS中习惯用法指令scope解析记录</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-08-26T21:30:45+08:00">
                2016-08-26
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li>记录的是个人习惯用法省略多余</li>
</ul>
<hr>
<pre><code>1、作为一个新的HTML元素来使用。
&lt;hello&gt;&lt;/hello&gt;或者&lt;hello/&gt;
2、作为一个元素的属性来使用
&lt;div hello&gt;&lt;/div&gt;
3、作为一个元素的类来使用
&lt;div class=&quot;hello&quot;&gt;&lt;/div&gt;

个人习惯也常用元素标签来使用
</code></pre><h3 id="（1）指令的定义，app-js："><a href="#（1）指令的定义，app-js：" class="headerlink" title="（1）指令的定义，app.js："></a>（1）指令的定义，app.js：</h3><pre><code>app.directive(&apos;myDirective&apos;, function() {
    return {
        restrict: &apos;E&apos;, E表示元素标签
        replace: true,
        templateUrl: &apos;index.html&apos;,
        scope: false,   // 默认值 true就开启控制层隔离
        transclude：true，
        link：function(scope,element,attrs){}
    }
});
</code></pre><h3 id="自定义指令HTML"><a href="#自定义指令HTML" class="headerlink" title="自定义指令HTML"></a>自定义指令HTML</h3><pre><code>&lt;my-directive&gt;自定义指令&lt;/my-directive&gt;
</code></pre><h3 id="（2）指令模板index-html"><a href="#（2）指令模板index-html" class="headerlink" title="（2）指令模板index.html"></a>（2）指令模板index.html</h3><pre><code>&lt;div&gt;

&lt;p&gt;自定义指令scope：
&lt;span ng-transclude&gt;
&lt;span&gt;
&lt;/p&gt;


&lt;/div&gt;
</code></pre><h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><ul>
<li>restrict为E 表示元素标签替换 <my-directive><my-directive></my-directive></my-directive></li>
<li>replace为true替换元素后不保留<my-directive></my-directive></li>
<li>templateUrl替换URL地址</li>
<li>scope为true 开启隔离父子级，独立控制层</li>
<li>transclude保留指令内内容ng-transclude放在templateUrl中元素标签内，就可以保留<h3 id="重点介绍scope"><a href="#重点介绍scope" class="headerlink" title="重点介绍scope"></a>重点介绍scope</h3></li>
<li>@：单向绑定，外部scope能够影响内部scope，但反过来不成立</li>
<li>=：双向绑定，外部scope和内部scope的model能够相互改变</li>
<li><p>&amp;：把内部scope的函数的返回值和外部scope的任何属性绑定起来</p>
<pre><code>记录
scope:{
        select:&quot;&amp;&quot;,
    },

templateUrl元素中事件传id
ng-click=&quot;select({id:position})&quot; &gt;&apos;

link中
 scope.position=attrs.id;

html元素中
select=&quot;selectTpl(id)&quot;

html 元素JS中写法
$scope.selectTpl=function(id){
    }
</code></pre></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/07/04/AngularJS$anchorScroll用法/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="CHEN.星">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CHEN.星~博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/07/04/AngularJS$anchorScroll用法/" itemprop="url">AngularJS$anchorScroll用法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-07-04T10:30:45+08:00">
                2016-07-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <pre><code>.controller(&apos;ScrollController&apos;, [&apos;$scope&apos;, &apos;$location&apos;, &apos;$anchorScroll&apos;,
function ($scope, $location, $anchorScroll) {
$scope.gotoBottom = function() {
  // 将location.hash的值设置为
  // 你想要滚动到的元素的id
  $location.hash(&apos;bottom&apos;);

  // 调用 $anchorScroll()
  $anchorScroll();

};
</code></pre><p>  }]);</p>
<h3 id="如何使用一个垂直滚动偏移（指定了一个固定值）关于-anchorScroll-yOffset"><a href="#如何使用一个垂直滚动偏移（指定了一个固定值）关于-anchorScroll-yOffset" class="headerlink" title="如何使用一个垂直滚动偏移（指定了一个固定值）关于 $anchorScroll.yOffset"></a>如何使用一个垂直滚动偏移（指定了一个固定值）关于 $anchorScroll.yOffset</h3><h2 id="html"><a href="#html" class="headerlink" title="html"></a>html</h2><pre><code>&lt;div class=&quot;fixed-header&quot; ng-controller=&quot;headerCtrl&quot;&gt;
  &lt;a href=&quot;&quot; ng-click=&quot;gotoAnchor(x)&quot; ng-repeat=&quot;x in [1,2,3,4,5]&quot;&gt;
Go to anchor {{x}}
  &lt;/a&gt;
&lt;/div&gt;
&lt;div id=&quot;anchor{{x}}&quot; class=&quot;anchor&quot; ng-repeat=&quot;x in [1,2,3,4,5]&quot;&gt;
  Anchor {{x}} of 5
&lt;/div&gt;
</code></pre><h2 id="js"><a href="#js" class="headerlink" title="js"></a>js</h2><pre><code>angular.module(&apos;anchorScrollOffsetExample&apos;, [])
.run([&apos;$anchorScroll&apos;, function($anchorScroll) {

      $anchorScroll.yOffset = 50;   // 总是滚动额外的50像素

}])
.controller(&apos;headerCtrl&apos;, [&apos;$anchorScroll&apos;, &apos;$location&apos;, &apos;$scope&apos;,
  function ($anchorScroll, $location, $scope) {
$scope.gotoAnchor = function(x) {

  var newHash = &apos;anchor&apos; + x;
  if ($location.hash() !== newHash) {

    // 将$location.hash设置为`newHash` and
    // $anchorScroll也将自动滚到该处

    $location.hash(&apos;anchor&apos; + x);

  } else {

    // 显式地调用 $anchorScroll()方法 ,
    // 因为 $location.hash 并没有改变
    $anchorScroll();

  }
};
</code></pre><p>  }<br>]);</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="CHEN.星" />
          <p class="site-author-name" itemprop="name">CHEN.星</p>
           
              <p class="site-description motion-element" itemprop="description">个人技术博客</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">24</span>
                <span class="site-state-item-name">Artikel</span>
              </a>
            </div>
          

          

          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">CHEN.星</span>
</div>


<div class="powered-by">
  Erstellt mit  <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  

  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  






  





  

  

  

  

  

  

</body>
</html>
